name: "python-sandbox"
description: "Secure Python script execution sandbox"

mode: ONCE
hostname: "sandbox"
cwd: "/tmp"

time_limit: 30

rlimit_as: 1024
rlimit_cpu: 10
rlimit_fsize: 64
rlimit_nofile: 256
rlimit_nproc: 64

# Disable user and network namespaces for Cloud Run compatibility
clone_newnet: false
clone_newuser: false
clone_newcgroup: false

mount {
  src: "/usr/local/bin/python3"
  dst: "/usr/local/bin/python3"
  is_bind: true
}

mount {
  src: "/usr/local/lib"
  dst: "/usr/local/lib"
  is_bind: true
  rw: false
}

mount {
  src: "/lib"
  dst: "/lib"
  is_bind: true
  rw: false
}

mount {
  src: "/lib64"
  dst: "/lib64"
  is_bind: true
  rw: false
  mandatory: false
}

mount {
  src: "/usr/lib"
  dst: "/usr/lib"
  is_bind: true
  rw: false
}

mount {
  src: "/etc"
  dst: "/etc"
  is_bind: true
  rw: false
}

mount {
  src: "/tmp"
  dst: "/tmp"
  is_bind: true
  rw: true
}

mount {
  dst: "/proc"
  fstype: "proc"
  rw: false
}

mount {
  dst: "/dev"
  fstype: "tmpfs"
  rw: true
  options: "size=4M"
}